<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button defaultHref="/atms/tabs/collections"></ion-back-button>
        </ion-buttons>

        <ion-title *ngIf="!isLoading && collection">{{collection.title}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-grid *ngIf="isLoading">
        <ion-row>
            <ion-col
                size="12"
                size-sm="8"
                offset-sm="2"
            >
                <ion-spinner></ion-spinner>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-grid
        class="ion-no-padding"
        *ngIf="!isLoading && lessons && lessons.length>0"
    >
        <!-- <ion-row>
            <ion-col
                size="12"
                size-sm="8"
                offset-sm="2"
            >

                <mat-form-field>
                    <input
                        matInput
                        (keyup)="applyFilter($event.target.value)"
                        placeholder="Filter"
                    >
                </mat-form-field>
            </ion-col>
        </ion-row> -->
        <ion-row>
            <ion-col
                size="12"
                size-sm="8"
                offset-sm="2"
            >

                <ion-searchbar
                    animated
                    (keyup)="applyFilter($event.target.value)"
                >
                </ion-searchbar>
            </ion-col>
            <ion-col
                size="12"
                size-sm="8"
                offset-sm="2"
            >

                <table
                    mat-table
                    [dataSource]="dataSource"
                    class="mat-elevation-z8"
                    matSort
                >

                    <ng-container matColumnDef="lessonId">
                        <th
                            mat-sort-header
                            mat-header-cell
                            *matHeaderCellDef
                            class="lessonId"
                        >
                            Lesson
                        </th>
                        <td
                            class="lessonId"
                            mat-cell
                            *matCellDef="let lesson"
                        >
                            {{lesson.lessonId}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="lessonTitle">
                        <th
                            mat-sort-header
                            mat-header-cell
                            *matHeaderCellDef
                        >
                            Title
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let lesson"
                        >
                            {{lesson.lessonTitle}}
                        </td>
                    </ng-container>
                    <!-- Action -->
                    <ng-container matColumnDef="action">
                        <th
                            mat-header-cell
                            *matHeaderCellDef
                            class="actions"
                        >
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let lesson"
                        >
                            <ion-button
                                size="small"
                                fill="clear"
                                class="ion-no-padding action"
                                color="secondary"
                                class="ion-margin"
                                (click)="onCollectionClick(lesson)"
                            >
                                <ion-icon name="clipboard"></ion-icon>
                            </ion-button>
                        </td>
                    </ng-container>

                    <tbody>
                        <tr
                            mat-header-row
                            *matHeaderRowDef="displayedColumns"
                            sticky
                        ></tr>
                        <tr
                            mat-row
                            *matRowDef="let row; columns: displayedColumns;"
                        ></tr>

                    </tbody>
                </table>

            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>

<mat-paginator
    [pageSizeOptions]="[50, 20, 10]"
    showFirstLastButtons
></mat-paginator>

<!-- <ion-content>
    <ion-grid>
        <ion-row>
            <ion-col
                size="12"
                size-sm="8"
                offset-sm="2"
            >
                <ion-list>
                    <ion-item
                        *ngFor="let lesson of lessons"
                        [routerLink]="['/','atms','tabs','collections', lesson.collectionId]"
                    >
                        <ion-chip color="secondary">
                            <ion-avatar>{{lesson.lessonId}}</ion-avatar>
                        </ion-chip>
                        <ion-label>{{lesson.lessonTitle}}</ion-label>
                        <ion-fab-button
                            color="secondary"
                            class="ion-margin"
                            (click)="onCollectionClick(lesson)"
                        >
                            <ion-icon name="musical-note"></ion-icon>
                        </ion-fab-button>

                    </ion-item>
                </ion-list>
            </ion-col>
        </ion-row>
    </ion-grid>

</ion-content> -->
